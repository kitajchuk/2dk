<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>2dk</title>
        <link href="/css/2dk.css" rel="stylesheet" />
        <style>
            html,
            body {
                line-height: 1.5;
                font-size: 14px;
            }
            body {
                padding: 64px 0;
                text-align: center;
            }
            html.suppressed,
            html.suppressed body {
                height: 100%;
                overflow: hidden;
            }
            h1 {
                font-size: 28px;
            }
            h2 {
                font-size: 22px;
                padding-top: 64px;
            }
            ul {
                padding-top: 32px;
            }
            ul li {
                margin: 16px 0;
                display: block;
            }
            a {
                color: #2AFFEA;
                text-decoration: underline;
            }
            span {
                color: #2AFFEA;
            }
            img {
                width: 100%;
                max-width: 1440px;
                margin: 32px auto 0;
            }
            main,
            header {
                padding: 0 16px;
            }
            footer {
                padding: 64px 16px 0;
            }
            .player {
                width: 768px;
                height: 576px;
                margin: 0 auto;
                position: relative;
                overflow: hidden;
                margin-top: 32px;
                border: 3px solid #333;
            }
            @media (max-width: 768px) {
                .player {
                    width: 384px;
                    height: 288px;
                }
                h1 {
                    font-size: 22px;
                }
                h2 {
                    font-size: 18px;
                }
            }
            @media (max-width: 384px) {
                .player,
                header > p {
                    display: none;
                }
            }
            .player:after {
                position: auto;
                content: "";
                width: 100%;
                height: 100%;
                position: absolute;
                left: 0;
                top: 0;
                z-index: 2;
            }
            .player iframe {
                width: 100%;
                height: 100%;
                position: absolute;
                left: 0;
                top: 0;
                z-index: 1;
            }
            .player.focused {
                border-color: #2AFFEA;
            }
        </style>
    </head>
    <body title="Click to unfocus">
        <header>
            <h1>2dk development demos</h1>
            <p>Focus the below frame and press <span>Enter</span> for the <span>la</span> demo.</p>
        </header>
        <main>
            <div class="player" title="Click to focus">
                <iframe src=""></iframe>
            </div>
            <ul>
                <li>
                    <p>Save one to your homescreen on your mobile phone to play anywhere:</p>
                </li>
                <li>
                    <a target="_blank" href="/games/loz/">original zelda style</a>
                </li>
                <li>
                    <a target="_blank" href="/games/la/">link's awakening style</a>
                </li>
                <li>
                    <a target="_blank" href="/games/cellauto/">cellular automata generation (la style)</a>
                </li>
            </ul>
            <h2>Quick developer notes:</h2>
            <ul>
                <li>
                    <p>Browser: Arrow keys, X is A, Z is B, Enter is Start.</p>
                </li>
                <li>
                    <p>Use <span>A (X key)</span> to grab objects and throw them as well as to jump.</p>
                </li>
                <li>
                    <p>Native <span>Gamepad</span> support tested with NES & SNES USB controllers.</p>
                </li>
                <li>
                    <p>Designed for mobile with a highly functional <span>8-point touch D-pad</span>.</p>
                </li>
                <li>
                    <p><span>Save to homescreen</span> on your mobile phone to play anywhere.</p>
                </li>
                <li>
                    <p>*Audio is disabled on mobile due to autoplay issues on devices.</p>
                </li>
            </ul>
            <h2>Electron Studio Software Screenshots:</h2>
            <img src="/img/mabevillage.png" loading="lazy" />
            <img src="/img/mysteriousforest.png" loading="lazy" />
            <img src="/img/ukukuprairie.png" loading="lazy" />
        </main>
        <footer>
            <a target="_blank" href="https://github.com/kitajchuk/2dk">github.com/kitajchuk/2dk</a>
        </footer>
        <script>
            const player = document.querySelector( ".player" );
            const iframe = document.querySelector( ".player iframe" );

            let timeout = null;

            function updatePlayer() {
                if ( window.innerWidth <= 832 ) {
                    iframe.src = "/games/la/?resolution=2";
                } else {
                    iframe.src = "/games/la/";
                }
            }

            player.addEventListener( "click", function () {
                player.classList.add( "focused" );
                document.documentElement.classList.add( "suppressed" );
                iframe.focus();
            }, false );

            window.addEventListener( "resize", function () {
                clearTimeout(timeout);
                timeout = setTimeout(function () {
                    updatePlayer();
                }, 300 );
            }, false );

            document.documentElement.addEventListener( "click", function ( e ) {
                if ( e.target !== player && e.target !== iframe && player.classList.contains( "focused" ) ) {
                    player.classList.remove( "focused" );
                    document.documentElement.classList.remove( "suppressed" );
                }
            }, false );

            updatePlayer();
        </script>
    </body>
</html>
